<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="4.3 Quintile Share Ratio (svyqsr) | Poverty and Inequality with Complex Survey Data" />
<meta property="og:type" content="book" />

<meta property="og:description" content="A book about the R convey package" />
<meta name="github-repo" content="guilhermejacob/context" />

<meta name="author" content="By Guilherme Jacob, Anthony Damico, and Djalma Pessoa. The authors received no external funding for the convey software and this accompanying textbook." />

<meta name="date" content="2024-01-02" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="A book about the R convey package">

<title>4.3 Quintile Share Ratio (svyqsr) | Poverty and Inequality with Complex Survey Data</title>

<link href="libs/tufte-css-2015.12.29/tufte-fonts.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-background.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-italics.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="toc.css" type="text/css" />

</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#intro" id="toc-intro"><span class="toc-section-number">1</span> Intro</a>
<ul>
<li><a href="1.1-install.html#install" id="toc-install"><span class="toc-section-number">1.1</span> Installation</a></li>
<li><a href="1.2-survey.html#survey" id="toc-survey"><span class="toc-section-number">1.2</span> Complex surveys and statistical inference</a></li>
<li><a href="1.3-usage-examples.html#usage-examples" id="toc-usage-examples"><span class="toc-section-number">1.3</span> Usage Examples</a></li>
<li class="has-sub"><a href="1.4-current-population-survey---annual-social-and-economic-supplement-cps-asec.html#current-population-survey---annual-social-and-economic-supplement-cps-asec" id="toc-current-population-survey---annual-social-and-economic-supplement-cps-asec"><span class="toc-section-number">1.4</span> Current Population Survey - Annual Social and Economic Supplement (CPS-ASEC)</a>
<ul>
<li><a href="1.4-current-population-survey---annual-social-and-economic-supplement-cps-asec.html#analysis-examples-with-the-survey-library" id="toc-analysis-examples-with-the-survey-library">Analysis Examples with the <code>survey</code> library  </a></li>
<li><a href="1.4-current-population-survey---annual-social-and-economic-supplement-cps-asec.html#household-income" id="toc-household-income"><span class="toc-section-number">1.4.1</span> Household Income</a></li>
<li><a href="1.4-current-population-survey---annual-social-and-economic-supplement-cps-asec.html#family-income" id="toc-family-income"><span class="toc-section-number">1.4.2</span> Family Income</a></li>
<li><a href="1.4-current-population-survey---annual-social-and-economic-supplement-cps-asec.html#worker-earnings" id="toc-worker-earnings"><span class="toc-section-number">1.4.3</span> Worker Earnings</a></li>
</ul></li>
<li class="has-sub"><a href="1.5-pesquisa-nacional-por-amostra-de-domicílios-contínua-pnad-contínua.html#pesquisa-nacional-por-amostra-de-domicílios-contínua-pnad-contínua" id="toc-pesquisa-nacional-por-amostra-de-domicílios-contínua-pnad-contínua"><span class="toc-section-number">1.5</span> Pesquisa Nacional por Amostra de Domicílios Contínua (PNAD-Contínua)</a>
<ul>
<li><a href="1.5-pesquisa-nacional-por-amostra-de-domicílios-contínua-pnad-contínua.html#analysis-examples-with-the-survey-library-1" id="toc-analysis-examples-with-the-survey-library-1">Analysis Examples with the <code>survey</code> library  </a></li>
<li><a href="1.5-pesquisa-nacional-por-amostra-de-domicílios-contínua-pnad-contínua.html#per-capita-income" id="toc-per-capita-income"><span class="toc-section-number">1.5.1</span> Per Capita Income</a></li>
<li><a href="1.5-pesquisa-nacional-por-amostra-de-domicílios-contínua-pnad-contínua.html#worker-earnings-1" id="toc-worker-earnings-1"><span class="toc-section-number">1.5.2</span> Worker Earnings</a></li>
</ul></li>
<li class="has-sub"><a href="1.6-survey-of-consumer-finances-scf.html#survey-of-consumer-finances-scf" id="toc-survey-of-consumer-finances-scf"><span class="toc-section-number">1.6</span> Survey of Consumer Finances (SCF)</a>
<ul>
<li><a href="1.6-survey-of-consumer-finances-scf.html#analysis-examples-with-the-survey-library-2" id="toc-analysis-examples-with-the-survey-library-2"><span class="toc-section-number">1.6.1</span> Analysis Examples with the <code>survey</code> library</a></li>
<li><a href="1.6-survey-of-consumer-finances-scf.html#family-net-worth" id="toc-family-net-worth"><span class="toc-section-number">1.6.2</span> Family Net Worth</a></li>
<li><a href="1.6-survey-of-consumer-finances-scf.html#family-income-1" id="toc-family-income-1"><span class="toc-section-number">1.6.3</span> Family Income</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="2-variance-estimation.html#variance-estimation" id="toc-variance-estimation"><span class="toc-section-number">2</span> Variance Estimation</a>
<ul>
<li class="has-sub"><a href="2.1-linearization-based-variance-estimation.html#linearization-based-variance-estimation" id="toc-linearization-based-variance-estimation"><span class="toc-section-number">2.1</span> Linearization-Based Variance Estimation</a>
<ul>
<li><a href="2.1-linearization-based-variance-estimation.html#influence-functions" id="toc-influence-functions"><span class="toc-section-number">2.1.1</span> Influence Functions</a></li>
</ul></li>
<li class="has-sub"><a href="2.2-replication-based-variance-estimation.html#replication-based-variance-estimation" id="toc-replication-based-variance-estimation"><span class="toc-section-number">2.2</span> Replication-Based Variance Estimation</a>
<ul>
<li><a href="2.2-replication-based-variance-estimation.html#replication-design-example" id="toc-replication-design-example"><span class="toc-section-number">2.2.1</span> Replication Design Example</a></li>
</ul></li>
<li><a href="2.3-variance-estimation-for-decompositions.html#variance-estimation-for-decompositions" id="toc-variance-estimation-for-decompositions"><span class="toc-section-number">2.3</span> Variance Estimation for Decompositions</a></li>
</ul></li>
<li class="has-sub"><a href="3-poverty.html#poverty" id="toc-poverty"><span class="toc-section-number">3</span> Poverty Indices</a>
<ul>
<li class="has-sub"><a href="3.1-at-risk-of-poverty-threshold-svyarpt.html#at-risk-of-poverty-threshold-svyarpt" id="toc-at-risk-of-poverty-threshold-svyarpt"><span class="toc-section-number">3.1</span> At Risk of Poverty Threshold (svyarpt)</a>
<ul>
<li><a href="3.1-at-risk-of-poverty-threshold-svyarpt.html#replication-example" id="toc-replication-example"><span class="toc-section-number">3.1.1</span> Replication Example</a></li>
<li><a href="3.1-at-risk-of-poverty-threshold-svyarpt.html#real-world-examples" id="toc-real-world-examples"><span class="toc-section-number">3.1.2</span> Real World Examples</a></li>
</ul></li>
<li class="has-sub"><a href="3.2-at-risk-of-poverty-ratio-svyarpr.html#at-risk-of-poverty-ratio-svyarpr" id="toc-at-risk-of-poverty-ratio-svyarpr"><span class="toc-section-number">3.2</span> At Risk of Poverty Ratio (svyarpr)</a>
<ul>
<li><a href="3.2-at-risk-of-poverty-ratio-svyarpr.html#replication-example-1" id="toc-replication-example-1"><span class="toc-section-number">3.2.1</span> Replication Example</a></li>
<li><a href="3.2-at-risk-of-poverty-ratio-svyarpr.html#real-world-examples-1" id="toc-real-world-examples-1"><span class="toc-section-number">3.2.2</span> Real World Examples</a></li>
</ul></li>
<li class="has-sub"><a href="3.3-relative-median-income-ratio-svyrmir.html#relative-median-income-ratio-svyrmir" id="toc-relative-median-income-ratio-svyrmir"><span class="toc-section-number">3.3</span> Relative Median Income Ratio (svyrmir)</a>
<ul>
<li><a href="3.3-relative-median-income-ratio-svyrmir.html#replication-example-2" id="toc-replication-example-2"><span class="toc-section-number">3.3.1</span> Replication Example</a></li>
<li><a href="3.3-relative-median-income-ratio-svyrmir.html#real-world-examples-2" id="toc-real-world-examples-2"><span class="toc-section-number">3.3.2</span> Real World Examples</a></li>
</ul></li>
<li class="has-sub"><a href="3.4-relative-median-poverty-gap-svyrmpg.html#relative-median-poverty-gap-svyrmpg" id="toc-relative-median-poverty-gap-svyrmpg"><span class="toc-section-number">3.4</span> Relative Median Poverty Gap (svyrmpg)</a>
<ul>
<li><a href="3.4-relative-median-poverty-gap-svyrmpg.html#replication-example-3" id="toc-replication-example-3"><span class="toc-section-number">3.4.1</span> Replication Example</a></li>
<li><a href="3.4-relative-median-poverty-gap-svyrmpg.html#real-world-examples-3" id="toc-real-world-examples-3"><span class="toc-section-number">3.4.2</span> Real World Examples</a></li>
</ul></li>
<li class="has-sub"><a href="3.5-median-income-below-the-at-risk-of-poverty-threshold-svypoormed.html#median-income-below-the-at-risk-of-poverty-threshold-svypoormed" id="toc-median-income-below-the-at-risk-of-poverty-threshold-svypoormed"><span class="toc-section-number">3.5</span> Median Income Below the At Risk of Poverty Threshold (svypoormed)</a>
<ul>
<li><a href="3.5-median-income-below-the-at-risk-of-poverty-threshold-svypoormed.html#replication-example-4" id="toc-replication-example-4"><span class="toc-section-number">3.5.1</span> Replication Example</a></li>
<li><a href="3.5-median-income-below-the-at-risk-of-poverty-threshold-svypoormed.html#real-world-examples-4" id="toc-real-world-examples-4"><span class="toc-section-number">3.5.2</span> Real World Examples</a></li>
</ul></li>
<li class="has-sub"><a href="3.6-foster-greer-thorbecke-class-svyfgt-svyfgtdec.html#foster-greer-thorbecke-class-svyfgt-svyfgtdec" id="toc-foster-greer-thorbecke-class-svyfgt-svyfgtdec"><span class="toc-section-number">3.6</span> Foster-Greer-Thorbecke class (svyfgt, svyfgtdec)</a>
<ul>
<li><a href="3.6-foster-greer-thorbecke-class-svyfgt-svyfgtdec.html#replication-example-5" id="toc-replication-example-5"><span class="toc-section-number">3.6.1</span> Replication Example</a></li>
<li><a href="3.6-foster-greer-thorbecke-class-svyfgt-svyfgtdec.html#monte-carlo-simulation" id="toc-monte-carlo-simulation"><span class="toc-section-number">3.6.2</span> Monte Carlo Simulation</a></li>
<li><a href="3.6-foster-greer-thorbecke-class-svyfgt-svyfgtdec.html#real-world-examples-5" id="toc-real-world-examples-5"><span class="toc-section-number">3.6.3</span> Real World Examples</a></li>
</ul></li>
<li class="has-sub"><a href="3.7-watts-poverty-measure-svywatts-svywattsdec.html#watts-poverty-measure-svywatts-svywattsdec" id="toc-watts-poverty-measure-svywatts-svywattsdec"><span class="toc-section-number">3.7</span> Watts poverty measure (svywatts, svywattsdec)</a>
<ul>
<li><a href="3.7-watts-poverty-measure-svywatts-svywattsdec.html#monte-carlo-simulation-1" id="toc-monte-carlo-simulation-1"><span class="toc-section-number">3.7.1</span> Monte Carlo Simulation</a></li>
<li><a href="3.7-watts-poverty-measure-svywatts-svywattsdec.html#real-world-examples-6" id="toc-real-world-examples-6"><span class="toc-section-number">3.7.2</span> Real World Examples</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="4-inequality.html#inequality" id="toc-inequality"><span class="toc-section-number">4</span> Inequality Measurement</a>
<ul>
<li><a href="4.1-which-inequality-measure-should-be-used.html#which-inequality-measure-should-be-used" id="toc-which-inequality-measure-should-be-used"><span class="toc-section-number">4.1</span> Which inequality measure should be used?</a></li>
<li class="has-sub"><a href="4.2-the-gender-pay-gap-svygpg.html#the-gender-pay-gap-svygpg" id="toc-the-gender-pay-gap-svygpg"><span class="toc-section-number">4.2</span> The Gender Pay Gap (svygpg)</a>
<ul>
<li><a href="4.2-the-gender-pay-gap-svygpg.html#replication-example-6" id="toc-replication-example-6"><span class="toc-section-number">4.2.1</span> Replication Example</a></li>
<li><a href="4.2-the-gender-pay-gap-svygpg.html#real-world-examples-7" id="toc-real-world-examples-7"><span class="toc-section-number">4.2.2</span> Real World Examples</a></li>
</ul></li>
<li class="has-sub"><a href="4.3-quintile-share-ratio-svyqsr.html#quintile-share-ratio-svyqsr" id="toc-quintile-share-ratio-svyqsr"><span class="toc-section-number">4.3</span> Quintile Share Ratio (svyqsr)</a>
<ul>
<li><a href="4.3-quintile-share-ratio-svyqsr.html#replication-example-7" id="toc-replication-example-7"><span class="toc-section-number">4.3.1</span> Replication Example</a></li>
<li><a href="4.3-quintile-share-ratio-svyqsr.html#real-world-examples-8" id="toc-real-world-examples-8"><span class="toc-section-number">4.3.2</span> Real World Examples</a></li>
</ul></li>
<li><a href="4.4-lorenz-curve-based-measures.html#lorenz-curve-based-measures" id="toc-lorenz-curve-based-measures"><span class="toc-section-number">4.4</span> Lorenz Curve-based Measures</a></li>
<li class="has-sub"><a href="4.5-lorenz-curve-svylorenz.html#lorenz-curve-svylorenz" id="toc-lorenz-curve-svylorenz"><span class="toc-section-number">4.5</span> Lorenz Curve (svylorenz)</a>
<ul>
<li><a href="4.5-lorenz-curve-svylorenz.html#replication-example-8" id="toc-replication-example-8"><span class="toc-section-number">4.5.1</span> Replication Example</a></li>
<li><a href="4.5-lorenz-curve-svylorenz.html#real-world-examples-9" id="toc-real-world-examples-9"><span class="toc-section-number">4.5.2</span> Real World Examples</a></li>
</ul></li>
<li class="has-sub"><a href="4.6-gini-index-svygini.html#gini-index-svygini" id="toc-gini-index-svygini"><span class="toc-section-number">4.6</span> Gini index (svygini)</a>
<ul>
<li><a href="4.6-gini-index-svygini.html#replication-example-9" id="toc-replication-example-9"><span class="toc-section-number">4.6.1</span> Replication Example</a></li>
<li><a href="4.6-gini-index-svygini.html#real-world-examples-10" id="toc-real-world-examples-10"><span class="toc-section-number">4.6.2</span> Real World Examples</a></li>
</ul></li>
<li class="has-sub"><a href="4.7-zenga-index-svyzenga.html#zenga-index-svyzenga" id="toc-zenga-index-svyzenga"><span class="toc-section-number">4.7</span> Zenga index (svyzenga)</a>
<ul>
<li><a href="4.7-zenga-index-svyzenga.html#replication-example-10" id="toc-replication-example-10"><span class="toc-section-number">4.7.1</span> Replication Example</a></li>
<li><a href="4.7-zenga-index-svyzenga.html#real-world-examples-11" id="toc-real-world-examples-11"><span class="toc-section-number">4.7.2</span> Real World Examples</a></li>
</ul></li>
<li><a href="4.8-social-welfare-function-based-measures.html#social-welfare-function-based-measures" id="toc-social-welfare-function-based-measures"><span class="toc-section-number">4.8</span> Social Welfare Function-based Measures</a></li>
<li class="has-sub"><a href="4.9-atkinson-index-svyatk.html#atkinson-index-svyatk" id="toc-atkinson-index-svyatk"><span class="toc-section-number">4.9</span> Atkinson index (svyatk)</a>
<ul>
<li><a href="4.9-atkinson-index-svyatk.html#replication-example-11" id="toc-replication-example-11"><span class="toc-section-number">4.9.1</span> Replication Example</a></li>
<li><a href="4.9-atkinson-index-svyatk.html#real-world-examples-12" id="toc-real-world-examples-12"><span class="toc-section-number">4.9.2</span> Real World Examples</a></li>
</ul></li>
<li><a href="4.10-entropy-based-measures.html#entropy-based-measures" id="toc-entropy-based-measures"><span class="toc-section-number">4.10</span> Entropy-based Measures</a></li>
<li class="has-sub"><a href="4.11-generalized-entropy-and-decomposition-svygei-svygeidec.html#generalized-entropy-and-decomposition-svygei-svygeidec" id="toc-generalized-entropy-and-decomposition-svygei-svygeidec"><span class="toc-section-number">4.11</span> Generalized Entropy and Decomposition (svygei, svygeidec)</a>
<ul>
<li><a href="4.11-generalized-entropy-and-decomposition-svygei-svygeidec.html#replication-example-12" id="toc-replication-example-12"><span class="toc-section-number">4.11.1</span> Replication Example</a></li>
<li><a href="4.11-generalized-entropy-and-decomposition-svygei-svygeidec.html#real-world-examples-13" id="toc-real-world-examples-13"><span class="toc-section-number">4.11.2</span> Real World Examples</a></li>
</ul></li>
<li class="has-sub"><a href="4.12-j-divergence-and-decomposition-svyjdiv-svyjdivdec.html#j-divergence-and-decomposition-svyjdiv-svyjdivdec" id="toc-j-divergence-and-decomposition-svyjdiv-svyjdivdec"><span class="toc-section-number">4.12</span> J-Divergence and Decomposition (svyjdiv, svyjdivdec)</a>
<ul>
<li><a href="4.12-j-divergence-and-decomposition-svyjdiv-svyjdivdec.html#monte-carlo-simulation-2" id="toc-monte-carlo-simulation-2"><span class="toc-section-number">4.12.1</span> Monte Carlo Simulation</a></li>
<li><a href="4.12-j-divergence-and-decomposition-svyjdiv-svyjdivdec.html#real-world-examples-14" id="toc-real-world-examples-14"><span class="toc-section-number">4.12.2</span> Real World Examples</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="5-richness.html#richness" id="toc-richness"><span class="toc-section-number">5</span> Richness</a>
<ul>
<li class="has-sub"><a href="5.1-richness-measures-svyrich.html#richness-measures-svyrich" id="toc-richness-measures-svyrich"><span class="toc-section-number">5.1</span> Richness Measures (svyrich)</a>
<ul>
<li><a href="5.1-richness-measures-svyrich.html#monte-carlo-simulation-3" id="toc-monte-carlo-simulation-3"><span class="toc-section-number">5.1.1</span> Monte Carlo Simulation</a></li>
<li><a href="5.1-richness-measures-svyrich.html#real-world-examples-15" id="toc-real-world-examples-15"><span class="toc-section-number">5.1.2</span> Real World Examples</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="6-covariance-matrix.html#covariance-matrix" id="toc-covariance-matrix"><span class="toc-section-number">6</span> Covariance Matrix</a>
<ul>
<li><a href="6.1-example-calculation.html#example-calculation" id="toc-example-calculation"><span class="toc-section-number">6.1</span> Example Calculation</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="quintile-share-ratio-svyqsr" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Quintile Share Ratio (svyqsr)</h2>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb627-1" tabindex="-1"></a>✔️ Easy to understand</span>
<span id="cb627-2"><a href="4.3-quintile-share-ratio-svyqsr.html#cb627-2" tabindex="-1"></a>✔️ Can be adapted into other more commonly used variants, like the Palma ratio</span>
<span id="cb627-3"><a href="4.3-quintile-share-ratio-svyqsr.html#cb627-3" tabindex="-1"></a>✔️ Can be interpreted using a Lorenz curve</span>
<span id="cb627-4"><a href="4.3-quintile-share-ratio-svyqsr.html#cb627-4" tabindex="-1"></a>❌ Fails the Pigou<span class="sc">-</span>Dalton <span class="fu">Principle</span> (depending on the donor and recipient position <span class="cf">in</span> the income distribution)</span>
<span id="cb627-5"><a href="4.3-quintile-share-ratio-svyqsr.html#cb627-5" tabindex="-1"></a>❌ Focuses on specific parts of the income  distribution, not the entire distribution</span></code></pre></div>
<p>Unlike the previous measure, the Quintile Share Ratio (QSR) is an inequality measure in itself, depending only on the income distribution to evaluate the degree of inequality. By definition, it can be described as the ratio between the income share held by the richest 20% and the poorest 20% of the population. In plain terms, it expresses how many times the wealthier part of the population are richer than the poorest part. For instance, a <span class="math inline">\(QSR = 4\)</span> implies that the upper class takes home 4 times as much of the total income as the poor.</p>
<p>The QSR can be modified to a more general function of percentile share ratios. For instance, <span class="citation">Cobham, Schlogl, and Sumner (<label for="tufte-mn-67" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-67" class="margin-toggle">2015<span class="marginnote">Cobham, Alex, Luke Schlogl, and Andy Sumner. 2015. <span>“<span class="nocase">Inequality and the Tails: The Palma Proposition and Ratio Revisited</span>.”</span> Working Papers 143. United Nations, Department of Economics; Social Affairs. <a href="http://www.un.org/esa/desa/papers/2015/wp143_2015.pdf">http://www.un.org/esa/desa/papers/2015/wp143_2015.pdf</a>.</span>)</span> argues for using the Palma index, defined as the ratio between the share of the 10% richest over the share held by the poorest 40%. There are actually two ways to compute the Palma ratio with the <code>convey</code> package. One is using <code>convey::svyqsr</code> and the other is using <code>convey::svylorenz</code> - not matching exactly, since they are based on different estimators. Since the Palma ratio is the top 10% divided by the bottom 40%, in <code>convey::svyqsr</code> this could be achieved using <code>alpha1 = .40</code> and <code>alpha2 = .90</code>. Note that the <code>vardpoor::linqsr</code> function only accepts a single <code>alpha</code> parameter (defaulting to <code>0.2</code> and <code>1 - 0.2</code>), meaning the Palma index cannot presently be computed using that function.</p>
<p>The details of the linearization of the QSR are discussed by <span class="citation">Deville (<label for="tufte-mn-68" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-68" class="margin-toggle">1999<span class="marginnote">Deville, Jean-Claude. 1999. <span>“Variance Estimation for Complex Statistics and Estimators: Linearization and Residual Techniques.”</span> <em>Survey Methodology</em> 25 (2): 193–203. <a href="http://www.statcan.gc.ca/pub/12-001-x/1999002/article/4882-eng.pdf">http://www.statcan.gc.ca/pub/12-001-x/1999002/article/4882-eng.pdf</a>.</span>)</span> and <span class="citation">Osier (<label for="tufte-mn-69" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-69" class="margin-toggle">2009<span class="marginnote">Osier, Guillaume. 2009. <span>“Variance Estimation for Complex Indicators of Poverty and Inequality.”</span> <em>Journal of the European Survey Research Association</em> 3 (3): 167–95. <a href="http://ojs.ub.uni-konstanz.de/srm/article/view/369">http://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.</span>)</span>.</p>
<hr />
<div id="replication-example-7" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Replication Example</h3>
<p>The R <code>vardpoor</code> package <span class="citation">(<label for="tufte-mn-70" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-70" class="margin-toggle">Breidaks, Liberts, and Ivanova 2016<span class="marginnote">Breidaks, Juris, Martins Liberts, and Santa Ivanova. 2016. <span>“Vardpoor: Estimation of Indicators on Social Exclusion and Poverty and Its Linearization, Variance Estimation.”</span> Riga, Latvia: CSB.</span>)</span>, created by researchers at the Central Statistical Bureau of Latvia, includes a QSR coefficient calculation using the ultimate cluster method. The example below reproduces those statistics.</p>
<p>Load and prepare the same data set:</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb628-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-1" tabindex="-1"></a><span class="co"># load the convey package</span></span>
<span id="cb628-2"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-2" tabindex="-1"></a><span class="fu">library</span>(convey)</span>
<span id="cb628-3"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-3" tabindex="-1"></a></span>
<span id="cb628-4"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-4" tabindex="-1"></a><span class="co"># load the survey library</span></span>
<span id="cb628-5"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-5" tabindex="-1"></a><span class="fu">library</span>(survey)</span>
<span id="cb628-6"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-6" tabindex="-1"></a></span>
<span id="cb628-7"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-7" tabindex="-1"></a><span class="co"># load the vardpoor library</span></span>
<span id="cb628-8"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-8" tabindex="-1"></a><span class="fu">library</span>(vardpoor)</span>
<span id="cb628-9"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-9" tabindex="-1"></a></span>
<span id="cb628-10"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-10" tabindex="-1"></a><span class="co"># load the laeken library</span></span>
<span id="cb628-11"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-11" tabindex="-1"></a><span class="fu">library</span>(laeken)</span>
<span id="cb628-12"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-12" tabindex="-1"></a></span>
<span id="cb628-13"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-13" tabindex="-1"></a><span class="co"># load the synthetic EU statistics on income &amp; living conditions</span></span>
<span id="cb628-14"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-14" tabindex="-1"></a><span class="fu">data</span>(eusilc)</span>
<span id="cb628-15"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-15" tabindex="-1"></a></span>
<span id="cb628-16"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-16" tabindex="-1"></a><span class="co"># make all column names lowercase</span></span>
<span id="cb628-17"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-17" tabindex="-1"></a><span class="fu">names</span>(eusilc) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(eusilc))</span>
<span id="cb628-18"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-18" tabindex="-1"></a></span>
<span id="cb628-19"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-19" tabindex="-1"></a><span class="co"># add a column with the row number</span></span>
<span id="cb628-20"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-20" tabindex="-1"></a>dati <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">data.table</span>(<span class="at">IDd =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(eusilc), eusilc)</span>
<span id="cb628-21"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-21" tabindex="-1"></a></span>
<span id="cb628-22"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-22" tabindex="-1"></a><span class="co"># calculate the qsr coefficient</span></span>
<span id="cb628-23"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-23" tabindex="-1"></a><span class="co"># using the R vardpoor library</span></span>
<span id="cb628-24"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-24" tabindex="-1"></a>varpoord_qsr_calculation <span class="ot">&lt;-</span></span>
<span id="cb628-25"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-25" tabindex="-1"></a>  <span class="fu">varpoord</span>(</span>
<span id="cb628-26"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-26" tabindex="-1"></a>    <span class="co"># analysis variable</span></span>
<span id="cb628-27"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-27" tabindex="-1"></a>    <span class="at">Y =</span> <span class="st">&quot;eqincome&quot;</span>,</span>
<span id="cb628-28"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-28" tabindex="-1"></a>    </span>
<span id="cb628-29"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-29" tabindex="-1"></a>    <span class="co"># weights variable</span></span>
<span id="cb628-30"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-30" tabindex="-1"></a>    <span class="at">w_final =</span> <span class="st">&quot;rb050&quot;</span>,</span>
<span id="cb628-31"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-31" tabindex="-1"></a>    </span>
<span id="cb628-32"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-32" tabindex="-1"></a>    <span class="co"># row number variable</span></span>
<span id="cb628-33"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-33" tabindex="-1"></a>    <span class="at">ID_level1 =</span> <span class="st">&quot;IDd&quot;</span>,</span>
<span id="cb628-34"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-34" tabindex="-1"></a>    </span>
<span id="cb628-35"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-35" tabindex="-1"></a>    <span class="co"># row number variable</span></span>
<span id="cb628-36"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-36" tabindex="-1"></a>    <span class="at">ID_level2 =</span> <span class="st">&quot;IDd&quot;</span>,</span>
<span id="cb628-37"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-37" tabindex="-1"></a>    </span>
<span id="cb628-38"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-38" tabindex="-1"></a>    <span class="co"># strata variable</span></span>
<span id="cb628-39"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-39" tabindex="-1"></a>    <span class="at">H =</span> <span class="st">&quot;db040&quot;</span>,</span>
<span id="cb628-40"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-40" tabindex="-1"></a>    </span>
<span id="cb628-41"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-41" tabindex="-1"></a>    <span class="at">N_h =</span> <span class="cn">NULL</span> ,</span>
<span id="cb628-42"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-42" tabindex="-1"></a>    </span>
<span id="cb628-43"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-43" tabindex="-1"></a>    <span class="co"># clustering variable</span></span>
<span id="cb628-44"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-44" tabindex="-1"></a>    <span class="at">PSU =</span> <span class="st">&quot;rb030&quot;</span>,</span>
<span id="cb628-45"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-45" tabindex="-1"></a>    </span>
<span id="cb628-46"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-46" tabindex="-1"></a>    <span class="co"># data.table</span></span>
<span id="cb628-47"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-47" tabindex="-1"></a>    <span class="at">dataset =</span> dati,</span>
<span id="cb628-48"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-48" tabindex="-1"></a>    </span>
<span id="cb628-49"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-49" tabindex="-1"></a>    <span class="co"># qsr coefficient function</span></span>
<span id="cb628-50"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-50" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&quot;linqsr&quot;</span>,</span>
<span id="cb628-51"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-51" tabindex="-1"></a>    </span>
<span id="cb628-52"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-52" tabindex="-1"></a>    <span class="co"># poverty threshold range</span></span>
<span id="cb628-53"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-53" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="dv">20</span> ,</span>
<span id="cb628-54"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-54" tabindex="-1"></a>    </span>
<span id="cb628-55"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-55" tabindex="-1"></a>    <span class="co"># get linearized variable</span></span>
<span id="cb628-56"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-56" tabindex="-1"></a>    <span class="at">outp_lin =</span> <span class="cn">TRUE</span></span>
<span id="cb628-57"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-57" tabindex="-1"></a>    </span>
<span id="cb628-58"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-58" tabindex="-1"></a>  )</span>
<span id="cb628-59"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-59" tabindex="-1"></a></span>
<span id="cb628-60"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-60" tabindex="-1"></a></span>
<span id="cb628-61"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-61" tabindex="-1"></a></span>
<span id="cb628-62"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-62" tabindex="-1"></a><span class="co"># construct a survey.design</span></span>
<span id="cb628-63"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-63" tabindex="-1"></a><span class="co"># using our recommended setup</span></span>
<span id="cb628-64"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-64" tabindex="-1"></a>des_eusilc <span class="ot">&lt;-</span></span>
<span id="cb628-65"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-65" tabindex="-1"></a>  <span class="fu">svydesign</span>(</span>
<span id="cb628-66"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-66" tabindex="-1"></a>    <span class="at">ids =</span> <span class="sc">~</span> rb030 ,</span>
<span id="cb628-67"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-67" tabindex="-1"></a>    <span class="at">strata =</span> <span class="sc">~</span> db040 ,</span>
<span id="cb628-68"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-68" tabindex="-1"></a>    <span class="at">weights =</span> <span class="sc">~</span> rb050 ,</span>
<span id="cb628-69"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-69" tabindex="-1"></a>    <span class="at">data =</span> eusilc</span>
<span id="cb628-70"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-70" tabindex="-1"></a>  )</span>
<span id="cb628-71"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-71" tabindex="-1"></a></span>
<span id="cb628-72"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-72" tabindex="-1"></a><span class="co"># immediately run the convey_prep function on it</span></span>
<span id="cb628-73"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-73" tabindex="-1"></a>des_eusilc <span class="ot">&lt;-</span> <span class="fu">convey_prep</span>(des_eusilc)</span>
<span id="cb628-74"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-74" tabindex="-1"></a></span>
<span id="cb628-75"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-75" tabindex="-1"></a><span class="co"># coefficients do match</span></span>
<span id="cb628-76"><a href="4.3-quintile-share-ratio-svyqsr.html#cb628-76" tabindex="-1"></a>varpoord_qsr_calculation<span class="sc">$</span>all_result<span class="sc">$</span>value</span></code></pre></div>
<pre><code>## [1] 3.970004</code></pre>
<div class="sourceCode" id="cb630"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb630-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb630-1" tabindex="-1"></a><span class="fu">coef</span>(<span class="fu">svyqsr</span>( <span class="sc">~</span> eqincome , des_eusilc))</span></code></pre></div>
<pre><code>## eqincome 
## 3.970004</code></pre>
<div class="sourceCode" id="cb632"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb632-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb632-1" tabindex="-1"></a><span class="co"># linearized variables do match</span></span>
<span id="cb632-2"><a href="4.3-quintile-share-ratio-svyqsr.html#cb632-2" tabindex="-1"></a><span class="co"># vardpoor</span></span>
<span id="cb632-3"><a href="4.3-quintile-share-ratio-svyqsr.html#cb632-3" tabindex="-1"></a>lin_qsr_varpoord <span class="ot">&lt;-</span> varpoord_qsr_calculation<span class="sc">$</span>lin_out<span class="sc">$</span>lin_qsr</span>
<span id="cb632-4"><a href="4.3-quintile-share-ratio-svyqsr.html#cb632-4" tabindex="-1"></a><span class="co"># convey</span></span>
<span id="cb632-5"><a href="4.3-quintile-share-ratio-svyqsr.html#cb632-5" tabindex="-1"></a>lin_qsr_convey <span class="ot">&lt;-</span></span>
<span id="cb632-6"><a href="4.3-quintile-share-ratio-svyqsr.html#cb632-6" tabindex="-1"></a>  <span class="fu">as.numeric</span>(<span class="fu">attr</span>(<span class="fu">svyqsr</span>( <span class="sc">~</span> eqincome ,</span>
<span id="cb632-7"><a href="4.3-quintile-share-ratio-svyqsr.html#cb632-7" tabindex="-1"></a>                          des_eusilc ,</span>
<span id="cb632-8"><a href="4.3-quintile-share-ratio-svyqsr.html#cb632-8" tabindex="-1"></a>                          <span class="at">linearized =</span> <span class="cn">TRUE</span>) ,</span>
<span id="cb632-9"><a href="4.3-quintile-share-ratio-svyqsr.html#cb632-9" tabindex="-1"></a>                  <span class="st">&quot;linearized&quot;</span>))</span>
<span id="cb632-10"><a href="4.3-quintile-share-ratio-svyqsr.html#cb632-10" tabindex="-1"></a></span>
<span id="cb632-11"><a href="4.3-quintile-share-ratio-svyqsr.html#cb632-11" tabindex="-1"></a><span class="co"># check equality</span></span>
<span id="cb632-12"><a href="4.3-quintile-share-ratio-svyqsr.html#cb632-12" tabindex="-1"></a><span class="fu">all.equal</span>(lin_qsr_varpoord, lin_qsr_convey)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb634"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb634-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb634-1" tabindex="-1"></a><span class="co"># variances do not match exactly</span></span>
<span id="cb634-2"><a href="4.3-quintile-share-ratio-svyqsr.html#cb634-2" tabindex="-1"></a><span class="fu">attr</span>(<span class="fu">svyqsr</span>( <span class="sc">~</span> eqincome , des_eusilc) , <span class="st">&#39;var&#39;</span>)</span></code></pre></div>
<pre><code>##             eqincome
## eqincome 0.001810537</code></pre>
<div class="sourceCode" id="cb636"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb636-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb636-1" tabindex="-1"></a>varpoord_qsr_calculation<span class="sc">$</span>all_result<span class="sc">$</span>var</span></code></pre></div>
<pre><code>## [1] 0.001807323</code></pre>
<div class="sourceCode" id="cb638"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb638-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb638-1" tabindex="-1"></a><span class="co"># standard errors do not match exactly</span></span>
<span id="cb638-2"><a href="4.3-quintile-share-ratio-svyqsr.html#cb638-2" tabindex="-1"></a>varpoord_qsr_calculation<span class="sc">$</span>all_result<span class="sc">$</span>se</span></code></pre></div>
<pre><code>## [1] 0.04251263</code></pre>
<div class="sourceCode" id="cb640"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb640-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb640-1" tabindex="-1"></a><span class="fu">SE</span>(<span class="fu">svyqsr</span>( <span class="sc">~</span> eqincome , des_eusilc))</span></code></pre></div>
<pre><code>##            eqincome
## eqincome 0.04255041</code></pre>
<p>The variance estimate and the linearized variable <span class="math inline">\(z\)</span> are both defined in <a href="2.1-linearization-based-variance-estimation.html#linearization-based-variance-estimation">Linearization-Based Variance Estimation</a>. The functions <code>convey::svyqsr</code> and <code>vardpoor::linqsr</code> produce the same linearized variable <span class="math inline">\(z\)</span>.</p>
<p>However, the measures of uncertainty do not line up, because <code>library(vardpoor)</code> defaults to an ultimate cluster method that can be replicated with an alternative setup of the <code>survey.design</code> object.</p>
<div class="sourceCode" id="cb642"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb642-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-1" tabindex="-1"></a><span class="co"># within each strata, sum up the weights</span></span>
<span id="cb642-2"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-2" tabindex="-1"></a>cluster_sums <span class="ot">&lt;-</span></span>
<span id="cb642-3"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-3" tabindex="-1"></a>  <span class="fu">aggregate</span>(eusilc<span class="sc">$</span>rb050 , <span class="fu">list</span>(eusilc<span class="sc">$</span>db040) , sum)</span>
<span id="cb642-4"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-4" tabindex="-1"></a></span>
<span id="cb642-5"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-5" tabindex="-1"></a><span class="co"># name the within-strata sums of weights the `cluster_sum`</span></span>
<span id="cb642-6"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-6" tabindex="-1"></a><span class="fu">names</span>(cluster_sums) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;db040&quot;</span> , <span class="st">&quot;cluster_sum&quot;</span>)</span>
<span id="cb642-7"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-7" tabindex="-1"></a></span>
<span id="cb642-8"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-8" tabindex="-1"></a><span class="co"># merge this column back onto the data.frame</span></span>
<span id="cb642-9"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-9" tabindex="-1"></a>eusilc <span class="ot">&lt;-</span> <span class="fu">merge</span>(eusilc , cluster_sums)</span>
<span id="cb642-10"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-10" tabindex="-1"></a></span>
<span id="cb642-11"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-11" tabindex="-1"></a><span class="co"># construct a survey.design</span></span>
<span id="cb642-12"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-12" tabindex="-1"></a><span class="co"># with the fpc using the cluster sum</span></span>
<span id="cb642-13"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-13" tabindex="-1"></a>des_eusilc_ultimate_cluster <span class="ot">&lt;-</span></span>
<span id="cb642-14"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-14" tabindex="-1"></a>  <span class="fu">svydesign</span>(</span>
<span id="cb642-15"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-15" tabindex="-1"></a>    <span class="at">ids =</span> <span class="sc">~</span> rb030 ,</span>
<span id="cb642-16"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-16" tabindex="-1"></a>    <span class="at">strata =</span> <span class="sc">~</span> db040 ,</span>
<span id="cb642-17"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-17" tabindex="-1"></a>    <span class="at">weights =</span> <span class="sc">~</span> rb050 ,</span>
<span id="cb642-18"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-18" tabindex="-1"></a>    <span class="at">data =</span> eusilc ,</span>
<span id="cb642-19"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-19" tabindex="-1"></a>    <span class="at">fpc =</span> <span class="sc">~</span> cluster_sum</span>
<span id="cb642-20"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-20" tabindex="-1"></a>  )</span>
<span id="cb642-21"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-21" tabindex="-1"></a></span>
<span id="cb642-22"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-22" tabindex="-1"></a><span class="co"># again, immediately run the convey_prep function on the `survey.design`</span></span>
<span id="cb642-23"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-23" tabindex="-1"></a>des_eusilc_ultimate_cluster <span class="ot">&lt;-</span></span>
<span id="cb642-24"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-24" tabindex="-1"></a>  <span class="fu">convey_prep</span>(des_eusilc_ultimate_cluster)</span>
<span id="cb642-25"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-25" tabindex="-1"></a></span>
<span id="cb642-26"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-26" tabindex="-1"></a><span class="co"># matches</span></span>
<span id="cb642-27"><a href="4.3-quintile-share-ratio-svyqsr.html#cb642-27" tabindex="-1"></a><span class="fu">attr</span>(<span class="fu">svyqsr</span>( <span class="sc">~</span> eqincome , des_eusilc_ultimate_cluster) , <span class="st">&#39;var&#39;</span>)</span></code></pre></div>
<pre><code>##             eqincome
## eqincome 0.001807323</code></pre>
<div class="sourceCode" id="cb644"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb644-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb644-1" tabindex="-1"></a>varpoord_qsr_calculation<span class="sc">$</span>all_result<span class="sc">$</span>var</span></code></pre></div>
<pre><code>## [1] 0.001807323</code></pre>
<div class="sourceCode" id="cb646"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb646-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb646-1" tabindex="-1"></a><span class="co"># matches</span></span>
<span id="cb646-2"><a href="4.3-quintile-share-ratio-svyqsr.html#cb646-2" tabindex="-1"></a>varpoord_qsr_calculation<span class="sc">$</span>all_result<span class="sc">$</span>se</span></code></pre></div>
<pre><code>## [1] 0.04251263</code></pre>
<div class="sourceCode" id="cb648"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb648-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb648-1" tabindex="-1"></a><span class="fu">SE</span>(<span class="fu">svyqsr</span>( <span class="sc">~</span> eqincome , des_eusilc_ultimate_cluster))</span></code></pre></div>
<pre><code>##            eqincome
## eqincome 0.04251263</code></pre>
<p>For additional usage examples of <code>svyqsr</code>, type <code>?convey::svyqsr</code> in the R console.</p>
</div>
<div id="real-world-examples-8" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Real World Examples</h3>
<p>This section displays example results using nationally-representative surveys from both the United States and Brazil. We present a variety of surveys, levels of analysis, and subpopulation breakouts to provide users with points of reference for the range of plausible values of the <code>svyqsr</code> function.</p>
<p>To understand the construction of each survey design object and respective variables of interest, please refer to <a href="https://guilhermejacob.github.io/context/1.4-current-population-survey---annual-social-and-economic-supplement-cps-asec.html">section 1.4</a> for CPS-ASEC, <a href="https://guilhermejacob.github.io/context/1.5-pesquisa-nacional-por-amostra-de-domic%C3%ADlios-cont%C3%ADnua-pnad-cont%C3%ADnua.html">section 1.5</a> for PNAD-Contínua, and <a href="https://guilhermejacob.github.io/context/1.6-survey-of-consumer-finances-scf.html">section 1.6</a> for SCF.</p>
<div id="cps-asec-household-income-8" class="section level4" number="4.3.2.1">
<h4><span class="header-section-number">4.3.2.1</span> CPS-ASEC Household Income</h4>
<div class="sourceCode" id="cb650"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb650-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb650-1" tabindex="-1"></a><span class="fu">svyqsr</span>(<span class="sc">~</span> htotval , cps_household_design)</span></code></pre></div>
<pre><code>##            qsr     SE
## htotval 17.209 0.1977</code></pre>
<div class="sourceCode" id="cb652"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb652-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb652-1" tabindex="-1"></a><span class="fu">svyby</span>(<span class="sc">~</span> htotval , <span class="sc">~</span> sex , cps_household_design , svyqsr)</span></code></pre></div>
<pre><code>##           sex  htotval se.htotval
## male     male 15.38253  0.2893779
## female female 18.62292  0.3249165</code></pre>
</div>
<div id="cps-asec-family-income-8" class="section level4" number="4.3.2.2">
<h4><span class="header-section-number">4.3.2.2</span> CPS-ASEC Family Income</h4>
<div class="sourceCode" id="cb654"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb654-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb654-1" tabindex="-1"></a><span class="fu">svyqsr</span>(<span class="sc">~</span> ftotval , cps_family_design)</span></code></pre></div>
<pre><code>##           qsr     SE
## ftotval 13.38 0.1755</code></pre>
<div class="sourceCode" id="cb656"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb656-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb656-1" tabindex="-1"></a><span class="fu">svyby</span>(<span class="sc">~</span> ftotval , <span class="sc">~</span> sex , cps_family_design , svyqsr)</span></code></pre></div>
<pre><code>##           sex  ftotval se.ftotval
## male     male 11.16757  0.3691317
## female female 15.33070  0.4216303</code></pre>
</div>
<div id="cps-asec-worker-earnings-8" class="section level4" number="4.3.2.3">
<h4><span class="header-section-number">4.3.2.3</span> CPS-ASEC Worker Earnings</h4>
<div class="sourceCode" id="cb658"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb658-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb658-1" tabindex="-1"></a><span class="fu">svyqsr</span>(<span class="sc">~</span> ptotval , cps_ftfy_worker_design)</span></code></pre></div>
<pre><code>##            qsr     SE
## ptotval 8.0295 0.0879</code></pre>
<div class="sourceCode" id="cb660"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb660-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb660-1" tabindex="-1"></a><span class="fu">svyby</span>(<span class="sc">~</span> ptotval , <span class="sc">~</span> sex , cps_ftfy_worker_design , svyqsr)</span></code></pre></div>
<pre><code>##           sex  ptotval se.ptotval
## male     male 8.391207  0.1437410
## female female 7.148470  0.1627764</code></pre>
<div class="sourceCode" id="cb662"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb662-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb662-1" tabindex="-1"></a><span class="fu">svyqsr</span>(<span class="sc">~</span> pearnval , cps_ftfy_worker_design)</span></code></pre></div>
<pre><code>##             qsr     SE
## pearnval 6.8394 0.1304</code></pre>
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb664-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb664-1" tabindex="-1"></a><span class="fu">svyby</span>(<span class="sc">~</span> pearnval , <span class="sc">~</span> sex , cps_ftfy_worker_design , svyqsr)</span></code></pre></div>
<pre><code>##           sex pearnval se.pearnval
## male     male 7.965207   0.1673114
## female female 6.883781   0.4940515</code></pre>
</div>
<div id="pnad-contínua-per-capita-income-8" class="section level4" number="4.3.2.4">
<h4><span class="header-section-number">4.3.2.4</span> PNAD-Contínua Per Capita Income</h4>
<div class="sourceCode" id="cb666"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb666-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb666-1" tabindex="-1"></a><span class="fu">svyqsr</span>( <span class="sc">~</span> deflated_per_capita_income , pnadc_design , <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##                               qsr     SE
## deflated_per_capita_income 16.543 0.2652</code></pre>
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb668-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb668-1" tabindex="-1"></a><span class="fu">svyby</span>(<span class="sc">~</span> deflated_per_capita_income ,</span>
<span id="cb668-2"><a href="4.3-quintile-share-ratio-svyqsr.html#cb668-2" tabindex="-1"></a>      <span class="sc">~</span> sex ,</span>
<span id="cb668-3"><a href="4.3-quintile-share-ratio-svyqsr.html#cb668-3" tabindex="-1"></a>      pnadc_design ,</span>
<span id="cb668-4"><a href="4.3-quintile-share-ratio-svyqsr.html#cb668-4" tabindex="-1"></a>      svyqsr ,</span>
<span id="cb668-5"><a href="4.3-quintile-share-ratio-svyqsr.html#cb668-5" tabindex="-1"></a>      <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##           sex deflated_per_capita_income se.deflated_per_capita_income
## male     male                   16.60765                     0.2855086
## female female                   16.46269                     0.2721942</code></pre>
</div>
<div id="pnad-contínua-worker-earnings-8" class="section level4" number="4.3.2.5">
<h4><span class="header-section-number">4.3.2.5</span> PNAD-Contínua Worker Earnings</h4>
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb670-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb670-1" tabindex="-1"></a><span class="fu">svyqsr</span>( <span class="sc">~</span> deflated_labor_income , pnadc_design , <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##                          qsr     SE
## deflated_labor_income 11.635 0.2021</code></pre>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb672-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb672-1" tabindex="-1"></a><span class="fu">svyby</span>( <span class="sc">~</span> deflated_labor_income , <span class="sc">~</span> sex , pnadc_design , svyqsr , <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##           sex deflated_labor_income se.deflated_labor_income
## male     male              10.96647                0.2373027
## female female              12.03254                0.2482242</code></pre>
</div>
<div id="scf-family-net-worth-8" class="section level4" number="4.3.2.6">
<h4><span class="header-section-number">4.3.2.6</span> SCF Family Net Worth</h4>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb674-1" tabindex="-1"></a><span class="fu">scf_MIcombine</span>(<span class="fu">with</span>(scf_design , <span class="fu">svyqsr</span>( <span class="sc">~</span> networth)))</span></code></pre></div>
<pre><code>## Multiple imputation results:
##       m &lt;- length(results)
##       scf_MIcombine(with(scf_design, svyqsr(~networth)))
##            results       se
## networth -379.1195 61.77653</code></pre>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb676-1" tabindex="-1"></a><span class="fu">scf_MIcombine</span>(<span class="fu">with</span>(scf_design , <span class="fu">svyby</span>( <span class="sc">~</span> networth, <span class="sc">~</span> hhsex , svyqsr)))</span></code></pre></div>
<pre><code>## Multiple imputation results:
##       m &lt;- length(results)
##       scf_MIcombine(with(scf_design, svyby(~networth, ~hhsex, svyqsr)))
##            results           se
## male   -2904.40589 4.598800e+05
## female   -51.58258 8.249331e+00</code></pre>
<p>Note the highly skewed nature of a variable like net worth, wealth, and assets (as opposed to income and earnings) can make the quintile share ratio result appear to be quite different compared to the other real world examples shown in this section.</p>
<p>First, this function generates a negative result because the sum of net worth of the bottom 20% of households is negative. We can use the Lorenz curve to get the cumulative shares of income held by the poorest <span class="math inline">\(p\)</span>% of the population. In other words, the poorest 20% of households have more debt than assets in aggregate:</p>
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb678-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb678-1" tabindex="-1"></a>networth_shares <span class="ot">&lt;-</span></span>
<span id="cb678-2"><a href="4.3-quintile-share-ratio-svyqsr.html#cb678-2" tabindex="-1"></a>  <span class="fu">scf_MIcombine</span>(<span class="fu">with</span>(scf_design , <span class="fu">svylorenz</span>(</span>
<span id="cb678-3"><a href="4.3-quintile-share-ratio-svyqsr.html#cb678-3" tabindex="-1"></a>    <span class="sc">~</span> networth, <span class="at">plot =</span> <span class="cn">FALSE</span> , <span class="at">quantiles =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, .<span class="dv">2</span>)</span>
<span id="cb678-4"><a href="4.3-quintile-share-ratio-svyqsr.html#cb678-4" tabindex="-1"></a>  )))</span>
<span id="cb678-5"><a href="4.3-quintile-share-ratio-svyqsr.html#cb678-5" tabindex="-1"></a><span class="fu">coef</span>(networth_shares)[<span class="dv">2</span>] <span class="co"># share owned by the bottom 20%</span></span></code></pre></div>
<pre><code>##       L(0.2) 
## -0.002255346</code></pre>
<p>Second, the heavy skew of assets (compared to income or earnings) in the country leads to a quintile share ratio value much higher than the same calculation on an income variable. Compared to the other <code>svyqsr</code> results in this section, the concentration of so much net worth among the richest 20% of the population produces the extreme <code>svyqsr</code> result:</p>
<div class="sourceCode" id="cb680"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb680-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb680-1" tabindex="-1"></a><span class="co"># share owned by the richest 20%:</span></span>
<span id="cb680-2"><a href="4.3-quintile-share-ratio-svyqsr.html#cb680-2" tabindex="-1"></a><span class="dv">1</span> <span class="sc">-</span> <span class="fu">coef</span>(networth_shares)[<span class="dv">5</span>] <span class="co"># 1 minus the share owned by the bottom 80%</span></span></code></pre></div>
<pre><code>##   L(0.8) 
## 0.853529</code></pre>
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb682-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb682-1" tabindex="-1"></a><span class="co"># approximate qsr</span></span>
<span id="cb682-2"><a href="4.3-quintile-share-ratio-svyqsr.html#cb682-2" tabindex="-1"></a>(<span class="dv">1</span> <span class="sc">-</span> <span class="fu">coef</span>(networth_shares)[[<span class="dv">5</span>]]) <span class="sc">/</span> <span class="fu">coef</span>(networth_shares)[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>## [1] -378.4471</code></pre>
</div>
<div id="scf-family-income-8" class="section level4" number="4.3.2.7">
<h4><span class="header-section-number">4.3.2.7</span> SCF Family Income</h4>
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb684-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb684-1" tabindex="-1"></a><span class="fu">scf_MIcombine</span>(<span class="fu">with</span>(scf_design , <span class="fu">svyqsr</span>( <span class="sc">~</span> income)))</span></code></pre></div>
<pre><code>## Multiple imputation results:
##       m &lt;- length(results)
##       scf_MIcombine(with(scf_design, svyqsr(~income)))
##         results       se
## income 23.16144 1.375722</code></pre>
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb686-1"><a href="4.3-quintile-share-ratio-svyqsr.html#cb686-1" tabindex="-1"></a><span class="fu">scf_MIcombine</span>(<span class="fu">with</span>(scf_design , <span class="fu">svyby</span>( <span class="sc">~</span> income, <span class="sc">~</span> hhsex , svyqsr)))</span></code></pre></div>
<pre><code>## Multiple imputation results:
##       m &lt;- length(results)
##       scf_MIcombine(with(scf_design, svyby(~income, ~hhsex, svyqsr)))
##         results        se
## male   21.27596 1.2528214
## female 10.51288 0.9816677</code></pre>
</div>
</div>
</div>
<p style="text-align: center;">
<a href="4.2-the-gender-pay-gap-svygpg.html"><button class="btn btn-default">Previous</button></a>
<a href="4.4-lorenz-curve-based-measures.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>



</body>
</html>
