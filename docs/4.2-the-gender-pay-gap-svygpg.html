<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="4.2 The Gender Pay Gap (svygpg) | Poverty and Inequality with Complex Survey Data" />
<meta property="og:type" content="book" />

<meta property="og:description" content="A book about the R convey package" />
<meta name="github-repo" content="guilhermejacob/context" />

<meta name="author" content="By Guilherme Jacob, Anthony Damico, and Djalma Pessoa. The authors received no external funding for the convey software and this accompanying textbook." />

<meta name="date" content="2023-11-11" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="A book about the R convey package">

<title>4.2 The Gender Pay Gap (svygpg) | Poverty and Inequality with Complex Survey Data</title>

<link href="libs/tufte-css-2015.12.29/tufte-fonts.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-background.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-italics.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="toc.css" type="text/css" />

</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#intro" id="toc-intro"><span class="toc-section-number">1</span> Intro</a>
<ul>
<li><a href="1.1-install.html#install" id="toc-install"><span class="toc-section-number">1.1</span> Installation</a></li>
<li><a href="1.2-survey.html#survey" id="toc-survey"><span class="toc-section-number">1.2</span> Complex surveys and statistical inference</a></li>
<li><a href="1.3-usage-examples.html#usage-examples" id="toc-usage-examples"><span class="toc-section-number">1.3</span> Usage Examples</a></li>
<li class="has-sub"><a href="1.4-current-population-survey-cps.html#current-population-survey-cps" id="toc-current-population-survey-cps"><span class="toc-section-number">1.4</span> Current Population Survey (CPS)</a>
<ul>
<li><a href="1.4-current-population-survey-cps.html#household-level" id="toc-household-level"><span class="toc-section-number">1.4.1</span> Household-level</a></li>
<li><a href="1.4-current-population-survey-cps.html#family-level" id="toc-family-level"><span class="toc-section-number">1.4.2</span> Family-level</a></li>
<li><a href="1.4-current-population-survey-cps.html#worker-earnings" id="toc-worker-earnings"><span class="toc-section-number">1.4.3</span> Worker Earnings</a></li>
</ul></li>
<li class="has-sub"><a href="1.5-pesquisa-nacional-por-amostra-de-domicílios-contínua-pnad-continua.html#pesquisa-nacional-por-amostra-de-domicílios-contínua-pnad-continua" id="toc-pesquisa-nacional-por-amostra-de-domicílios-contínua-pnad-continua"><span class="toc-section-number">1.5</span> Pesquisa Nacional por Amostra de Domicílios Contínua (PNAD-Continua)</a>
<ul>
<li><a href="1.5-pesquisa-nacional-por-amostra-de-domicílios-contínua-pnad-continua.html#per-capita-level" id="toc-per-capita-level"><span class="toc-section-number">1.5.1</span> Per Capita-level</a></li>
<li><a href="1.5-pesquisa-nacional-por-amostra-de-domicílios-contínua-pnad-continua.html#worker-earnings-1" id="toc-worker-earnings-1"><span class="toc-section-number">1.5.2</span> Worker Earnings</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="2-var.html#var" id="toc-var"><span class="toc-section-number">2</span> Variance Estimation</a>
<ul>
<li class="has-sub"><a href="2.1-lin.html#lin" id="toc-lin"><span class="toc-section-number">2.1</span> Linearization-Based Variance Estimation</a>
<ul>
<li><a href="2.1-lin.html#influence-functions" id="toc-influence-functions"><span class="toc-section-number">2.1.1</span> Influence Functions</a></li>
</ul></li>
<li class="has-sub"><a href="2.2-replication-based-variance-estimation.html#replication-based-variance-estimation" id="toc-replication-based-variance-estimation"><span class="toc-section-number">2.2</span> Replication-Based Variance Estimation</a>
<ul>
<li><a href="2.2-replication-based-variance-estimation.html#replication-design-example" id="toc-replication-design-example"><span class="toc-section-number">2.2.1</span> Replication Design Example</a></li>
</ul></li>
<li><a href="2.3-variance-estimation-for-decompositions.html#variance-estimation-for-decompositions" id="toc-variance-estimation-for-decompositions"><span class="toc-section-number">2.3</span> Variance Estimation for Decompositions</a></li>
</ul></li>
<li class="has-sub"><a href="3-poverty.html#poverty" id="toc-poverty"><span class="toc-section-number">3</span> Poverty Indices</a>
<ul>
<li class="has-sub"><a href="3.1-at-risk-of-poverty-threshold-svyarpt.html#at-risk-of-poverty-threshold-svyarpt" id="toc-at-risk-of-poverty-threshold-svyarpt"><span class="toc-section-number">3.1</span> At Risk of Poverty Threshold (svyarpt)</a>
<ul>
<li><a href="3.1-at-risk-of-poverty-threshold-svyarpt.html#replication-example" id="toc-replication-example"><span class="toc-section-number">3.1.1</span> Replication Example</a></li>
</ul></li>
<li class="has-sub"><a href="3.2-at-risk-of-poverty-ratio-svyarpr.html#at-risk-of-poverty-ratio-svyarpr" id="toc-at-risk-of-poverty-ratio-svyarpr"><span class="toc-section-number">3.2</span> At Risk of Poverty Ratio (svyarpr)</a>
<ul>
<li><a href="3.2-at-risk-of-poverty-ratio-svyarpr.html#replication-example-1" id="toc-replication-example-1"><span class="toc-section-number">3.2.1</span> Replication Example</a></li>
</ul></li>
<li class="has-sub"><a href="3.3-relative-median-income-ratio-svyrmir.html#relative-median-income-ratio-svyrmir" id="toc-relative-median-income-ratio-svyrmir"><span class="toc-section-number">3.3</span> Relative Median Income Ratio (svyrmir)</a>
<ul>
<li><a href="3.3-relative-median-income-ratio-svyrmir.html#replication-example-2" id="toc-replication-example-2"><span class="toc-section-number">3.3.1</span> Replication Example</a></li>
</ul></li>
<li class="has-sub"><a href="3.4-relative-median-poverty-gap-svyrmpg.html#relative-median-poverty-gap-svyrmpg" id="toc-relative-median-poverty-gap-svyrmpg"><span class="toc-section-number">3.4</span> Relative Median Poverty Gap (svyrmpg)</a>
<ul>
<li><a href="3.4-relative-median-poverty-gap-svyrmpg.html#replication-example-3" id="toc-replication-example-3"><span class="toc-section-number">3.4.1</span> Replication Example</a></li>
</ul></li>
<li class="has-sub"><a href="3.5-median-income-below-the-at-risk-of-poverty-threshold-svypoormed.html#median-income-below-the-at-risk-of-poverty-threshold-svypoormed" id="toc-median-income-below-the-at-risk-of-poverty-threshold-svypoormed"><span class="toc-section-number">3.5</span> Median Income Below the At Risk of Poverty Threshold (svypoormed)</a>
<ul>
<li><a href="3.5-median-income-below-the-at-risk-of-poverty-threshold-svypoormed.html#replication-example-4" id="toc-replication-example-4"><span class="toc-section-number">3.5.1</span> Replication Example</a></li>
</ul></li>
<li class="has-sub"><a href="3.6-foster-greer-thorbecke-class-svyfgt-svyfgtdec.html#foster-greer-thorbecke-class-svyfgt-svyfgtdec" id="toc-foster-greer-thorbecke-class-svyfgt-svyfgtdec"><span class="toc-section-number">3.6</span> Foster-Greer-Thorbecke class (svyfgt, svyfgtdec)</a>
<ul>
<li><a href="3.6-foster-greer-thorbecke-class-svyfgt-svyfgtdec.html#replication-example-5" id="toc-replication-example-5"><span class="toc-section-number">3.6.1</span> Replication Example</a></li>
<li><a href="3.6-foster-greer-thorbecke-class-svyfgt-svyfgtdec.html#monte-carlo-simulation" id="toc-monte-carlo-simulation"><span class="toc-section-number">3.6.2</span> Monte Carlo Simulation</a></li>
</ul></li>
<li class="has-sub"><a href="3.7-watts-poverty-measure-svywatts-svywattsdec.html#watts-poverty-measure-svywatts-svywattsdec" id="toc-watts-poverty-measure-svywatts-svywattsdec"><span class="toc-section-number">3.7</span> Watts poverty measure (svywatts, svywattsdec)</a>
<ul>
<li><a href="3.7-watts-poverty-measure-svywatts-svywattsdec.html#monte-carlo-simulation-1" id="toc-monte-carlo-simulation-1"><span class="toc-section-number">3.7.1</span> Monte Carlo Simulation</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="4-inequality.html#inequality" id="toc-inequality"><span class="toc-section-number">4</span> Inequality Measurement</a>
<ul>
<li><a href="4.1-which-inequality-measure-should-be-used.html#which-inequality-measure-should-be-used" id="toc-which-inequality-measure-should-be-used"><span class="toc-section-number">4.1</span> Which inequality measure should be used?</a></li>
<li class="has-sub"><a href="4.2-the-gender-pay-gap-svygpg.html#the-gender-pay-gap-svygpg" id="toc-the-gender-pay-gap-svygpg"><span class="toc-section-number">4.2</span> The Gender Pay Gap (svygpg)</a>
<ul>
<li><a href="4.2-the-gender-pay-gap-svygpg.html#replication-example-6" id="toc-replication-example-6"><span class="toc-section-number">4.2.1</span> Replication Example</a></li>
</ul></li>
<li class="has-sub"><a href="4.3-quintile-share-ratio-svyqsr.html#quintile-share-ratio-svyqsr" id="toc-quintile-share-ratio-svyqsr"><span class="toc-section-number">4.3</span> Quintile Share Ratio (svyqsr)</a>
<ul>
<li><a href="4.3-quintile-share-ratio-svyqsr.html#replication-example-7" id="toc-replication-example-7"><span class="toc-section-number">4.3.1</span> Replication Example</a></li>
</ul></li>
<li><a href="4.4-lorenz-curve-based-measures.html#lorenz-curve-based-measures" id="toc-lorenz-curve-based-measures"><span class="toc-section-number">4.4</span> Lorenz Curve-based Measures</a></li>
<li class="has-sub"><a href="4.5-lorenz-curve-svylorenz.html#lorenz-curve-svylorenz" id="toc-lorenz-curve-svylorenz"><span class="toc-section-number">4.5</span> Lorenz Curve (svylorenz)</a>
<ul>
<li><a href="4.5-lorenz-curve-svylorenz.html#replication-example-8" id="toc-replication-example-8"><span class="toc-section-number">4.5.1</span> Replication Example</a></li>
</ul></li>
<li class="has-sub"><a href="4.6-gini-index-svygini.html#gini-index-svygini" id="toc-gini-index-svygini"><span class="toc-section-number">4.6</span> Gini index (svygini)</a>
<ul>
<li><a href="4.6-gini-index-svygini.html#replication-example-9" id="toc-replication-example-9"><span class="toc-section-number">4.6.1</span> Replication Example</a></li>
</ul></li>
<li class="has-sub"><a href="4.7-zenga-index-svyzenga.html#zenga-index-svyzenga" id="toc-zenga-index-svyzenga"><span class="toc-section-number">4.7</span> Zenga index (svyzenga)</a>
<ul>
<li><a href="4.7-zenga-index-svyzenga.html#replication-example-10" id="toc-replication-example-10"><span class="toc-section-number">4.7.1</span> Replication Example</a></li>
</ul></li>
<li><a href="4.8-social-welfare-function-based-measures.html#social-welfare-function-based-measures" id="toc-social-welfare-function-based-measures"><span class="toc-section-number">4.8</span> Social Welfare Function-based Measures</a></li>
<li class="has-sub"><a href="4.9-atkinson-index-svyatk.html#atkinson-index-svyatk" id="toc-atkinson-index-svyatk"><span class="toc-section-number">4.9</span> Atkinson index (svyatk)</a>
<ul>
<li><a href="4.9-atkinson-index-svyatk.html#replication-example-11" id="toc-replication-example-11"><span class="toc-section-number">4.9.1</span> Replication Example</a></li>
</ul></li>
<li><a href="4.10-entropy-based-measures.html#entropy-based-measures" id="toc-entropy-based-measures"><span class="toc-section-number">4.10</span> Entropy-based Measures</a></li>
<li class="has-sub"><a href="4.11-generalized-entropy-and-decomposition-svygei-svygeidec.html#generalized-entropy-and-decomposition-svygei-svygeidec" id="toc-generalized-entropy-and-decomposition-svygei-svygeidec"><span class="toc-section-number">4.11</span> Generalized Entropy and Decomposition (svygei, svygeidec)</a>
<ul>
<li><a href="4.11-generalized-entropy-and-decomposition-svygei-svygeidec.html#replication-example-12" id="toc-replication-example-12"><span class="toc-section-number">4.11.1</span> Replication Example</a></li>
</ul></li>
<li class="has-sub"><a href="4.12-j-divergence-and-decomposition-svyjdiv-svyjdivdec.html#j-divergence-and-decomposition-svyjdiv-svyjdivdec" id="toc-j-divergence-and-decomposition-svyjdiv-svyjdivdec"><span class="toc-section-number">4.12</span> J-Divergence and Decomposition (svyjdiv, svyjdivdec)</a>
<ul>
<li><a href="4.12-j-divergence-and-decomposition-svyjdiv-svyjdivdec.html#monte-carlo-simulation-2" id="toc-monte-carlo-simulation-2"><span class="toc-section-number">4.12.1</span> Monte Carlo Simulation</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="5-richness.html#richness" id="toc-richness"><span class="toc-section-number">5</span> Richness</a>
<ul>
<li class="has-sub"><a href="5.1-richness-measures-svyrich.html#richness-measures-svyrich" id="toc-richness-measures-svyrich"><span class="toc-section-number">5.1</span> Richness Measures (svyrich)</a>
<ul>
<li><a href="5.1-richness-measures-svyrich.html#monte-carlo-simulation-3" id="toc-monte-carlo-simulation-3"><span class="toc-section-number">5.1.1</span> Monte Carlo Simulation</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="6-multidimensional-poverty.html#multidimensional-poverty" id="toc-multidimensional-poverty"><span class="toc-section-number">6</span> Multidimensional Poverty</a>
<ul>
<li><a href="6.1-example-calculation.html#example-calculation" id="toc-example-calculation"><span class="toc-section-number">6.1</span> Example Calculation</a></li>
</ul></li>
<li class="has-sub"><a href="7-covariance-matrix.html#covariance-matrix" id="toc-covariance-matrix"><span class="toc-section-number">7</span> Covariance Matrix</a>
<ul>
<li><a href="7.1-example-calculation-1.html#example-calculation-1" id="toc-example-calculation-1"><span class="toc-section-number">7.1</span> Example Calculation</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="the-gender-pay-gap-svygpg" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> The Gender Pay Gap (svygpg)</h2>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb276-1" tabindex="-1"></a>✔️ easy to understand</span>
<span id="cb276-2"><a href="4.2-the-gender-pay-gap-svygpg.html#cb276-2" tabindex="-1"></a>✔️ the difference of men and women average wages expressed as a fraction of average men wages</span>
<span id="cb276-3"><a href="4.2-the-gender-pay-gap-svygpg.html#cb276-3" tabindex="-1"></a>✔️ alternatively<span class="sc">:</span> the average women wage is <span class="st">`</span><span class="at">( 1 - GPG ) x average men wage</span><span class="st">`</span></span>
<span id="cb276-4"><a href="4.2-the-gender-pay-gap-svygpg.html#cb276-4" tabindex="-1"></a>❌ not an inequality measure <span class="cf">in</span> the Pigou<span class="sc">-</span>Dalton Principle sense</span>
<span id="cb276-5"><a href="4.2-the-gender-pay-gap-svygpg.html#cb276-5" tabindex="-1"></a>❌ ignores within<span class="sc">-</span>inequality among men and among women</span>
<span id="cb276-6"><a href="4.2-the-gender-pay-gap-svygpg.html#cb276-6" tabindex="-1"></a>❌ binary gender only</span></code></pre></div>
<p>Although the Gender Pay Gap (GPG) is not an inequality measure in the usual sense, it can still be a useful instrument to evaluate the effects of gender discrimination. Put simply, it expresses the relative difference between the average hourly earnings of men and women, presenting this difference as a percentage of the average of hourly earnings of men. Like some other functions described in this text, the GPG can also be calculated using wealth or assets in place of earnings.</p>
<p>In mathematical terms, this index can be described as,</p>
<p><span class="math display">\[ GPG = \frac{ \bar{y}_{male} - \bar{y}_{female} }{ \bar{y}_{male} } \]</span></p>
<p>As we can see from the formula, if there is no difference among classes, <span class="math inline">\(GPG = 0\)</span>. Else, if <span class="math inline">\(GPG &gt; 0\)</span>, it means that the average hourly income received by women are <span class="math inline">\(GPG\)</span> percent smaller than men’s. For negative <span class="math inline">\(GPG\)</span>, it means that women’s hourly earnings are <span class="math inline">\(GPG\)</span> percent larger than men’s. In other words, the larger the <span class="math inline">\(GPG\)</span>, larger is the shortfall of women’s hourly earnings.</p>
<p>We can also develop a more straightforward idea: for every $1 raise in men’s hourly earnings, women’s hourly earnings are expected to increase $<span class="math inline">\((1-GPG)\)</span>. For instance, assuming <span class="math inline">\(GPG = 0.8\)</span>, for every $1.00 increase in men’s average hourly earnings, women’s hourly earnings would increase only $0.20.</p>
<p>The details of the linearization of the GPG are discussed by <span class="citation">Deville (<label for="tufte-mn-62" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-62" class="margin-toggle">1999<span class="marginnote">Deville, Jean-Claude. 1999. <span>“Variance Estimation for Complex Statistics and Estimators: Linearization and Residual Techniques.”</span> <em>Survey Methodology</em> 25 (2): 193–203. <a href="http://www.statcan.gc.ca/pub/12-001-x/1999002/article/4882-eng.pdf">http://www.statcan.gc.ca/pub/12-001-x/1999002/article/4882-eng.pdf</a>.</span>)</span> and <span class="citation">Osier (<label for="tufte-mn-63" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-63" class="margin-toggle">2009<span class="marginnote">Osier, Guillaume. 2009. <span>“Variance Estimation for Complex Indicators of Poverty and Inequality.”</span> <em>Journal of the European Survey Research Association</em> 3 (3): 167–95. <a href="http://ojs.ub.uni-konstanz.de/srm/article/view/369">http://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.</span>)</span>.</p>
<hr />
<div id="replication-example-6" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Replication Example</h3>
<p>The R <code>vardpoor</code> package <span class="citation">(<label for="tufte-mn-64" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-64" class="margin-toggle">Breidaks, Liberts, and Ivanova 2016<span class="marginnote">Breidaks, Juris, Martins Liberts, and Santa Ivanova. 2016. <span>“Vardpoor: Estimation of Indicators on Social Exclusion and Poverty and Its Linearization, Variance Estimation.”</span> Riga, Latvia: CSB.</span>)</span>, created by researchers at the Central Statistical Bureau of Latvia, includes a GPG coefficient calculation using the ultimate cluster method. The example below reproduces those statistics.</p>
<p>Load and prepare the same data set:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb277-1" tabindex="-1"></a><span class="co"># load the convey package</span></span>
<span id="cb277-2"><a href="4.2-the-gender-pay-gap-svygpg.html#cb277-2" tabindex="-1"></a><span class="fu">library</span>(convey)</span>
<span id="cb277-3"><a href="4.2-the-gender-pay-gap-svygpg.html#cb277-3" tabindex="-1"></a></span>
<span id="cb277-4"><a href="4.2-the-gender-pay-gap-svygpg.html#cb277-4" tabindex="-1"></a><span class="co"># load the survey library</span></span>
<span id="cb277-5"><a href="4.2-the-gender-pay-gap-svygpg.html#cb277-5" tabindex="-1"></a><span class="fu">library</span>(survey)</span></code></pre></div>
<pre><code>## Carregando pacotes exigidos: grid</code></pre>
<pre><code>## Carregando pacotes exigidos: Matrix</code></pre>
<pre><code>## Carregando pacotes exigidos: survival</code></pre>
<pre><code>## 
## Attaching package: &#39;survey&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:graphics&#39;:
## 
##     dotchart</code></pre>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-1" tabindex="-1"></a><span class="co"># load the vardpoor library</span></span>
<span id="cb283-2"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-2" tabindex="-1"></a><span class="fu">library</span>(vardpoor)</span>
<span id="cb283-3"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-3" tabindex="-1"></a></span>
<span id="cb283-4"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-4" tabindex="-1"></a><span class="co"># load the laeken library</span></span>
<span id="cb283-5"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-5" tabindex="-1"></a><span class="fu">library</span>(laeken)</span>
<span id="cb283-6"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-6" tabindex="-1"></a></span>
<span id="cb283-7"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-7" tabindex="-1"></a><span class="co"># load the synthetic EU statistics on income &amp; living conditions</span></span>
<span id="cb283-8"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-8" tabindex="-1"></a><span class="fu">data</span>(eusilc)</span>
<span id="cb283-9"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-9" tabindex="-1"></a></span>
<span id="cb283-10"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-10" tabindex="-1"></a><span class="co"># make all column names lowercase</span></span>
<span id="cb283-11"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-11" tabindex="-1"></a><span class="fu">names</span>(eusilc) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(eusilc))</span>
<span id="cb283-12"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-12" tabindex="-1"></a></span>
<span id="cb283-13"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-13" tabindex="-1"></a><span class="co"># coerce the gender variable to numeric 1 or 2</span></span>
<span id="cb283-14"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-14" tabindex="-1"></a>eusilc<span class="sc">$</span>one_two <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(eusilc<span class="sc">$</span>rb090 <span class="sc">==</span> <span class="st">&quot;female&quot;</span>) <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb283-15"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-15" tabindex="-1"></a></span>
<span id="cb283-16"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-16" tabindex="-1"></a><span class="co"># add a column with the row number</span></span>
<span id="cb283-17"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-17" tabindex="-1"></a>dati <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">data.table</span>(<span class="at">IDd =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(eusilc), eusilc)</span>
<span id="cb283-18"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-18" tabindex="-1"></a></span>
<span id="cb283-19"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-19" tabindex="-1"></a><span class="co"># calculate the gpg coefficient</span></span>
<span id="cb283-20"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-20" tabindex="-1"></a><span class="co"># using the R vardpoor library</span></span>
<span id="cb283-21"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-21" tabindex="-1"></a>varpoord_gpg_calculation <span class="ot">&lt;-</span></span>
<span id="cb283-22"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-22" tabindex="-1"></a>  <span class="fu">varpoord</span>(</span>
<span id="cb283-23"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-23" tabindex="-1"></a>    <span class="co"># analysis variable</span></span>
<span id="cb283-24"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-24" tabindex="-1"></a>    <span class="at">Y =</span> <span class="st">&quot;eqincome&quot;</span>,</span>
<span id="cb283-25"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-25" tabindex="-1"></a>    </span>
<span id="cb283-26"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-26" tabindex="-1"></a>    <span class="co"># weights variable</span></span>
<span id="cb283-27"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-27" tabindex="-1"></a>    <span class="at">w_final =</span> <span class="st">&quot;rb050&quot;</span>,</span>
<span id="cb283-28"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-28" tabindex="-1"></a>    </span>
<span id="cb283-29"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-29" tabindex="-1"></a>    <span class="co"># row number variable</span></span>
<span id="cb283-30"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-30" tabindex="-1"></a>    <span class="at">ID_level1 =</span> <span class="st">&quot;IDd&quot;</span>,</span>
<span id="cb283-31"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-31" tabindex="-1"></a>    </span>
<span id="cb283-32"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-32" tabindex="-1"></a>    <span class="co"># row number variable</span></span>
<span id="cb283-33"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-33" tabindex="-1"></a>    <span class="at">ID_level2 =</span> <span class="st">&quot;IDd&quot;</span>,</span>
<span id="cb283-34"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-34" tabindex="-1"></a>    </span>
<span id="cb283-35"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-35" tabindex="-1"></a>    <span class="co"># strata variable</span></span>
<span id="cb283-36"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-36" tabindex="-1"></a>    <span class="at">H =</span> <span class="st">&quot;db040&quot;</span>,</span>
<span id="cb283-37"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-37" tabindex="-1"></a>    </span>
<span id="cb283-38"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-38" tabindex="-1"></a>    <span class="at">N_h =</span> <span class="cn">NULL</span> ,</span>
<span id="cb283-39"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-39" tabindex="-1"></a>    </span>
<span id="cb283-40"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-40" tabindex="-1"></a>    <span class="co"># clustering variable</span></span>
<span id="cb283-41"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-41" tabindex="-1"></a>    <span class="at">PSU =</span> <span class="st">&quot;rb030&quot;</span>,</span>
<span id="cb283-42"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-42" tabindex="-1"></a>    </span>
<span id="cb283-43"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-43" tabindex="-1"></a>    <span class="co"># data.table</span></span>
<span id="cb283-44"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-44" tabindex="-1"></a>    <span class="at">dataset =</span> dati,</span>
<span id="cb283-45"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-45" tabindex="-1"></a>    </span>
<span id="cb283-46"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-46" tabindex="-1"></a>    <span class="co"># gpg coefficient function</span></span>
<span id="cb283-47"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-47" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&quot;lingpg&quot;</span> ,</span>
<span id="cb283-48"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-48" tabindex="-1"></a>    </span>
<span id="cb283-49"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-49" tabindex="-1"></a>    <span class="co"># gender variable</span></span>
<span id="cb283-50"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-50" tabindex="-1"></a>    <span class="at">gender =</span> <span class="st">&quot;one_two&quot;</span>,</span>
<span id="cb283-51"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-51" tabindex="-1"></a>    </span>
<span id="cb283-52"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-52" tabindex="-1"></a>    <span class="co"># get linearized variable</span></span>
<span id="cb283-53"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-53" tabindex="-1"></a>    <span class="at">outp_lin =</span> <span class="cn">TRUE</span></span>
<span id="cb283-54"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-54" tabindex="-1"></a>  )</span>
<span id="cb283-55"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-55" tabindex="-1"></a></span>
<span id="cb283-56"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-56" tabindex="-1"></a></span>
<span id="cb283-57"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-57" tabindex="-1"></a></span>
<span id="cb283-58"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-58" tabindex="-1"></a><span class="co"># construct a survey.design</span></span>
<span id="cb283-59"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-59" tabindex="-1"></a><span class="co"># using our recommended setup</span></span>
<span id="cb283-60"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-60" tabindex="-1"></a>des_eusilc <span class="ot">&lt;-</span></span>
<span id="cb283-61"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-61" tabindex="-1"></a>  <span class="fu">svydesign</span>(</span>
<span id="cb283-62"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-62" tabindex="-1"></a>    <span class="at">ids =</span> <span class="sc">~</span> rb030 ,</span>
<span id="cb283-63"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-63" tabindex="-1"></a>    <span class="at">strata =</span> <span class="sc">~</span> db040 ,</span>
<span id="cb283-64"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-64" tabindex="-1"></a>    <span class="at">weights =</span> <span class="sc">~</span> rb050 ,</span>
<span id="cb283-65"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-65" tabindex="-1"></a>    <span class="at">data =</span> eusilc</span>
<span id="cb283-66"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-66" tabindex="-1"></a>  )</span>
<span id="cb283-67"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-67" tabindex="-1"></a></span>
<span id="cb283-68"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-68" tabindex="-1"></a><span class="co"># immediately run the convey_prep function on it</span></span>
<span id="cb283-69"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-69" tabindex="-1"></a>des_eusilc <span class="ot">&lt;-</span> <span class="fu">convey_prep</span>(des_eusilc)</span>
<span id="cb283-70"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-70" tabindex="-1"></a></span>
<span id="cb283-71"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-71" tabindex="-1"></a><span class="co"># coefficients do match</span></span>
<span id="cb283-72"><a href="4.2-the-gender-pay-gap-svygpg.html#cb283-72" tabindex="-1"></a>varpoord_gpg_calculation<span class="sc">$</span>all_result<span class="sc">$</span>value</span></code></pre></div>
<pre><code>## [1] 7.645389</code></pre>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb285-1" tabindex="-1"></a><span class="fu">coef</span>(<span class="fu">svygpg</span>( <span class="sc">~</span> eqincome , des_eusilc , <span class="at">sex =</span> <span class="sc">~</span> rb090)) <span class="sc">*</span> <span class="dv">100</span></span></code></pre></div>
<pre><code>##  eqincome 
## -8.278297</code></pre>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb287-1" tabindex="-1"></a><span class="co"># linearized variables do match</span></span>
<span id="cb287-2"><a href="4.2-the-gender-pay-gap-svygpg.html#cb287-2" tabindex="-1"></a><span class="co"># vardpoor</span></span>
<span id="cb287-3"><a href="4.2-the-gender-pay-gap-svygpg.html#cb287-3" tabindex="-1"></a>lin_gpg_varpoord <span class="ot">&lt;-</span> varpoord_gpg_calculation<span class="sc">$</span>lin_out<span class="sc">$</span>lin_gpg</span>
<span id="cb287-4"><a href="4.2-the-gender-pay-gap-svygpg.html#cb287-4" tabindex="-1"></a><span class="co"># convey</span></span>
<span id="cb287-5"><a href="4.2-the-gender-pay-gap-svygpg.html#cb287-5" tabindex="-1"></a>lin_gpg_convey <span class="ot">&lt;-</span></span>
<span id="cb287-6"><a href="4.2-the-gender-pay-gap-svygpg.html#cb287-6" tabindex="-1"></a>  <span class="fu">attr</span>(<span class="fu">svygpg</span>( <span class="sc">~</span> eqincome , des_eusilc, <span class="at">sex =</span> <span class="sc">~</span> rb090), <span class="st">&quot;lin&quot;</span>)</span>
<span id="cb287-7"><a href="4.2-the-gender-pay-gap-svygpg.html#cb287-7" tabindex="-1"></a></span>
<span id="cb287-8"><a href="4.2-the-gender-pay-gap-svygpg.html#cb287-8" tabindex="-1"></a><span class="co"># check equality</span></span>
<span id="cb287-9"><a href="4.2-the-gender-pay-gap-svygpg.html#cb287-9" tabindex="-1"></a><span class="fu">all.equal</span>(lin_gpg_varpoord, <span class="dv">100</span> <span class="sc">*</span> lin_gpg_convey[, <span class="dv">1</span>])</span></code></pre></div>
<pre><code>## [1] &quot;Mean relative difference: 2.172419&quot;</code></pre>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb289-1" tabindex="-1"></a><span class="co"># variances do not match exactly</span></span>
<span id="cb289-2"><a href="4.2-the-gender-pay-gap-svygpg.html#cb289-2" tabindex="-1"></a><span class="fu">attr</span>(<span class="fu">svygpg</span>( <span class="sc">~</span> eqincome , des_eusilc , <span class="at">sex =</span> <span class="sc">~</span> rb090) , <span class="st">&#39;var&#39;</span>) <span class="sc">*</span> <span class="dv">10000</span></span></code></pre></div>
<pre><code>##           eqincome
## eqincome 0.8926311</code></pre>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb291-1" tabindex="-1"></a>varpoord_gpg_calculation<span class="sc">$</span>all_result<span class="sc">$</span>var</span></code></pre></div>
<pre><code>## [1] 0.6482346</code></pre>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb293-1" tabindex="-1"></a><span class="co"># standard errors do not match exactly</span></span>
<span id="cb293-2"><a href="4.2-the-gender-pay-gap-svygpg.html#cb293-2" tabindex="-1"></a>varpoord_gpg_calculation<span class="sc">$</span>all_result<span class="sc">$</span>se</span></code></pre></div>
<pre><code>## [1] 0.8051301</code></pre>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb295-1" tabindex="-1"></a><span class="fu">SE</span>(<span class="fu">svygpg</span>( <span class="sc">~</span> eqincome , des_eusilc , <span class="at">sex =</span> <span class="sc">~</span> rb090)) <span class="sc">*</span> <span class="dv">100</span></span></code></pre></div>
<pre><code>##           eqincome
## eqincome 0.9447916</code></pre>
<p>The variance estimate is computed by using the approximation defined in <a href="2-var.html#var">2</a>, while the linearized variable <span class="math inline">\(z\)</span> is defined by <a href="2.1-lin.html#lin">2.1</a>. The functions <code>convey::svygpg</code> and <code>vardpoor::lingpg</code> produce the same linearized variable <span class="math inline">\(z\)</span>.</p>
<p>However, the measures of uncertainty do not line up, because <code>library(vardpoor)</code> defaults to an ultimate cluster method that can be replicated with an alternative setup of the <code>survey.design</code> object.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-1" tabindex="-1"></a><span class="co"># within each strata, sum up the weights</span></span>
<span id="cb297-2"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-2" tabindex="-1"></a>cluster_sums <span class="ot">&lt;-</span></span>
<span id="cb297-3"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-3" tabindex="-1"></a>  <span class="fu">aggregate</span>(eusilc<span class="sc">$</span>rb050 , <span class="fu">list</span>(eusilc<span class="sc">$</span>db040) , sum)</span>
<span id="cb297-4"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-4" tabindex="-1"></a></span>
<span id="cb297-5"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-5" tabindex="-1"></a><span class="co"># name the within-strata sums of weights the `cluster_sum`</span></span>
<span id="cb297-6"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-6" tabindex="-1"></a><span class="fu">names</span>(cluster_sums) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;db040&quot;</span> , <span class="st">&quot;cluster_sum&quot;</span>)</span>
<span id="cb297-7"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-7" tabindex="-1"></a></span>
<span id="cb297-8"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-8" tabindex="-1"></a><span class="co"># merge this column back onto the data.frame</span></span>
<span id="cb297-9"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-9" tabindex="-1"></a>eusilc <span class="ot">&lt;-</span> <span class="fu">merge</span>(eusilc , cluster_sums)</span>
<span id="cb297-10"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-10" tabindex="-1"></a></span>
<span id="cb297-11"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-11" tabindex="-1"></a><span class="co"># construct a survey.design</span></span>
<span id="cb297-12"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-12" tabindex="-1"></a><span class="co"># with the fpc using the cluster sum</span></span>
<span id="cb297-13"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-13" tabindex="-1"></a>des_eusilc_ultimate_cluster <span class="ot">&lt;-</span></span>
<span id="cb297-14"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-14" tabindex="-1"></a>  <span class="fu">svydesign</span>(</span>
<span id="cb297-15"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-15" tabindex="-1"></a>    <span class="at">ids =</span> <span class="sc">~</span> rb030 ,</span>
<span id="cb297-16"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-16" tabindex="-1"></a>    <span class="at">strata =</span> <span class="sc">~</span> db040 ,</span>
<span id="cb297-17"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-17" tabindex="-1"></a>    <span class="at">weights =</span> <span class="sc">~</span> rb050 ,</span>
<span id="cb297-18"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-18" tabindex="-1"></a>    <span class="at">data =</span> eusilc ,</span>
<span id="cb297-19"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-19" tabindex="-1"></a>    <span class="at">fpc =</span> <span class="sc">~</span> cluster_sum</span>
<span id="cb297-20"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-20" tabindex="-1"></a>  )</span>
<span id="cb297-21"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-21" tabindex="-1"></a></span>
<span id="cb297-22"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-22" tabindex="-1"></a><span class="co"># again, immediately run the convey_prep function on the `survey.design`</span></span>
<span id="cb297-23"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-23" tabindex="-1"></a>des_eusilc_ultimate_cluster <span class="ot">&lt;-</span></span>
<span id="cb297-24"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-24" tabindex="-1"></a>  <span class="fu">convey_prep</span>(des_eusilc_ultimate_cluster)</span>
<span id="cb297-25"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-25" tabindex="-1"></a></span>
<span id="cb297-26"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-26" tabindex="-1"></a><span class="co"># matches</span></span>
<span id="cb297-27"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-27" tabindex="-1"></a><span class="fu">attr</span>(<span class="fu">svygpg</span>( <span class="sc">~</span> eqincome , des_eusilc_ultimate_cluster , <span class="at">sex =</span> <span class="sc">~</span> rb090) ,</span>
<span id="cb297-28"><a href="4.2-the-gender-pay-gap-svygpg.html#cb297-28" tabindex="-1"></a>     <span class="st">&#39;var&#39;</span>) <span class="sc">*</span> <span class="dv">10000</span></span></code></pre></div>
<pre><code>##           eqincome
## eqincome 0.8910413</code></pre>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb299-1" tabindex="-1"></a>varpoord_gpg_calculation<span class="sc">$</span>all_result<span class="sc">$</span>var</span></code></pre></div>
<pre><code>## [1] 0.6482346</code></pre>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb301-1" tabindex="-1"></a><span class="co"># matches</span></span>
<span id="cb301-2"><a href="4.2-the-gender-pay-gap-svygpg.html#cb301-2" tabindex="-1"></a>varpoord_gpg_calculation<span class="sc">$</span>all_result<span class="sc">$</span>se</span></code></pre></div>
<pre><code>## [1] 0.8051301</code></pre>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="4.2-the-gender-pay-gap-svygpg.html#cb303-1" tabindex="-1"></a><span class="fu">SE</span>(<span class="fu">svygpg</span>( <span class="sc">~</span> eqincome , des_eusilc_ultimate_cluster , <span class="at">sex =</span> <span class="sc">~</span> rb090)) <span class="sc">*</span> <span class="dv">100</span></span></code></pre></div>
<pre><code>##           eqincome
## eqincome 0.9439499</code></pre>
<p>For additional usage examples of <code>svygpg</code>, type <code>?convey::svygpg</code> in the R console.</p>
</div>
</div>
<p style="text-align: center;">
<a href="4.1-which-inequality-measure-should-be-used.html"><button class="btn btn-default">Previous</button></a>
<a href="4.3-quintile-share-ratio-svyqsr.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>



</body>
</html>
